<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Secure login and signup for Hybrid Deep Learning Fake News Detection application">
    <title>Login - Fake News Detection</title>
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles/auth.css">
    <link rel="stylesheet" href="styles/responsive.css">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="js/auth.js" as="script">
    <link rel="preload" href="js/security.js" as="script">
</head>
<body class="auth-page">
    <!-- Skip to main content for screen readers -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Error container for notifications -->
    <div id="error-container" class="error-container" aria-live="polite"></div>
    
    <main id="main-content" class="auth-container">
        <div class="auth-card">
            <!-- Logo and branding -->
            <div class="auth-header">
                <h1 class="auth-title">
                    <span class="logo-icon" aria-hidden="true">üõ°Ô∏è</span>
                    Fake News Detection
                </h1>
                <p class="auth-subtitle">Secure Authentication Portal</p>
            </div>
            
            <!-- Tab navigation for login/signup -->
            <div class="auth-tabs" role="tablist" aria-label="Authentication options">
                <button 
                    class="tab-button active" 
                    role="tab" 
                    aria-selected="true" 
                    aria-controls="login-panel" 
                    id="login-tab"
                    data-tab="login"
                >
                    Sign In
                </button>
                <button 
                    class="tab-button" 
                    role="tab" 
                    aria-selected="false" 
                    aria-controls="signup-panel" 
                    id="signup-tab"
                    data-tab="signup"
                >
                    Sign Up
                </button>
            </div>
            
            <!-- Login Form -->
            <div 
                id="login-panel" 
                class="tab-panel active" 
                role="tabpanel" 
                aria-labelledby="login-tab"
            >
                <form id="loginForm" class="auth-form" novalidate>
                    <h2 class="sr-only">Login Form</h2>
                    
                    <div class="form-group">
                        <label for="loginEmail" class="required">
                            Email Address
                            <span class="sr-only">required</span>
                        </label>
                        <input 
                            type="email" 
                            id="loginEmail" 
                            name="email" 
                            required 
                            autocomplete="email"
                            aria-describedby="loginEmailError loginEmailHelp"
                            aria-invalid="false"
                            placeholder="Enter your email address"
                        >
                        <div id="loginEmailHelp" class="help-text">Enter your registered email address</div>
                        <span class="error-message" id="loginEmailError" role="alert" aria-live="polite"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword" class="required">
                            Password
                            <span class="sr-only">required</span>
                        </label>
                        <div class="password-input">
                            <input 
                                type="password" 
                                id="loginPassword" 
                                name="password" 
                                required 
                                autocomplete="current-password"
                                aria-describedby="loginPasswordError loginPasswordHelp"
                                aria-invalid="false"
                                placeholder="Enter your password"
                            >
                            <button 
                                type="button" 
                                class="toggle-password" 
                                aria-label="Show password"
                                aria-pressed="false"
                                data-target="loginPassword"
                            >
                                <span class="eye-icon" aria-hidden="true">üëÅÔ∏è</span>
                            </button>
                        </div>
                        <div id="loginPasswordHelp" class="help-text">Enter your account password</div>
                        <span class="error-message" id="loginPasswordError" role="alert" aria-live="polite"></span>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberMe" name="rememberMe">
                            <span class="checkmark" aria-hidden="true"></span>
                            Remember me for 30 days
                        </label>
                        
                        <a href="#forgot-password" class="forgot-link">Forgot password?</a>
                    </div>
                    
                    <button type="submit" class="auth-btn primary" aria-describedby="loginStatus">
                        <span class="btn-text">Sign In</span>
                        <span class="btn-loader hidden" aria-hidden="true">üîÑ</span>
                    </button>
                    
                    <div id="loginStatus" class="sr-only" aria-live="polite" aria-atomic="true"></div>
                </form>
            </div>
            
            <!-- Signup Form -->
            <div 
                id="signup-panel" 
                class="tab-panel" 
                role="tabpanel" 
                aria-labelledby="signup-tab"
                hidden
            >
                <form id="signupForm" class="auth-form" novalidate>
                    <h2 class="sr-only">Sign Up Form</h2>
                    
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="signupFirstName" class="required">
                                First Name
                                <span class="sr-only">required</span>
                            </label>
                            <input 
                                type="text" 
                                id="signupFirstName" 
                                name="firstName" 
                                required 
                                autocomplete="given-name"
                                aria-describedby="signupFirstNameError"
                                aria-invalid="false"
                                placeholder="First name"
                            >
                            <span class="error-message" id="signupFirstNameError" role="alert" aria-live="polite"></span>
                        </div>
                        
                        <div class="form-group half">
                            <label for="signupLastName" class="required">
                                Last Name
                                <span class="sr-only">required</span>
                            </label>
                            <input 
                                type="text" 
                                id="signupLastName" 
                                name="lastName" 
                                required 
                                autocomplete="family-name"
                                aria-describedby="signupLastNameError"
                                aria-invalid="false"
                                placeholder="Last name"
                            >
                            <span class="error-message" id="signupLastNameError" role="alert" aria-live="polite"></span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="signupEmail" class="required">
                            Email Address
                            <span class="sr-only">required</span>
                        </label>
                        <input 
                            type="email" 
                            id="signupEmail" 
                            name="email" 
                            required 
                            autocomplete="email"
                            aria-describedby="signupEmailError signupEmailHelp"
                            aria-invalid="false"
                            placeholder="Enter your email address"
                        >
                        <div id="signupEmailHelp" class="help-text">We'll use this to send you important updates</div>
                        <span class="error-message" id="signupEmailError" role="alert" aria-live="polite"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="signupPassword" class="required">
                            Password
                            <span class="sr-only">required</span>
                        </label>
                        <div class="password-input">
                            <input 
                                type="password" 
                                id="signupPassword" 
                                name="password" 
                                required 
                                autocomplete="new-password"
                                aria-describedby="signupPasswordError signupPasswordHelp passwordStrength"
                                aria-invalid="false"
                                placeholder="Create a strong password"
                            >
                            <button 
                                type="button" 
                                class="toggle-password" 
                                aria-label="Show password"
                                aria-pressed="false"
                                data-target="signupPassword"
                            >
                                <span class="eye-icon" aria-hidden="true">üëÅÔ∏è</span>
                            </button>
                        </div>
                        <div id="signupPasswordHelp" class="help-text">Minimum 8 characters with uppercase, lowercase, number, and special character</div>
                        <div id="passwordStrength" class="password-strength" aria-live="polite">
                            <div class="strength-bar">
                                <div class="strength-fill" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <span class="strength-text">Password strength: <span class="strength-level">None</span></span>
                        </div>
                        <span class="error-message" id="signupPasswordError" role="alert" aria-live="polite"></span>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword" class="required">
                            Confirm Password
                            <span class="sr-only">required</span>
                        </label>
                        <div class="password-input">
                            <input 
                                type="password" 
                                id="confirmPassword" 
                                name="confirmPassword" 
                                required 
                                autocomplete="new-password"
                                aria-describedby="confirmPasswordError"
                                aria-invalid="false"
                                placeholder="Confirm your password"
                            >
                            <button 
                                type="button" 
                                class="toggle-password" 
                                aria-label="Show password"
                                aria-pressed="false"
                                data-target="confirmPassword"
                            >
                                <span class="eye-icon" aria-hidden="true">üëÅÔ∏è</span>
                            </button>
                        </div>
                        <span class="error-message" id="confirmPasswordError" role="alert" aria-live="polite"></span>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label required">
                            <input type="checkbox" id="agreeTerms" name="agreeTerms" required aria-describedby="agreeTermsError">
                            <span class="checkmark" aria-hidden="true"></span>
                            I agree to the <a href="#terms" target="_blank">Terms of Service</a> and <a href="#privacy" target="_blank">Privacy Policy</a>
                            <span class="sr-only">required</span>
                        </label>
                        <span class="error-message" id="agreeTermsError" role="alert" aria-live="polite"></span>
                    </div>
                    
                    <button type="submit" class="auth-btn primary" aria-describedby="signupStatus">
                        <span class="btn-text">Create Account</span>
                        <span class="btn-loader hidden" aria-hidden="true">üîÑ</span>
                    </button>
                    
                    <div id="signupStatus" class="sr-only" aria-live="polite" aria-atomic="true"></div>
                </form>
            </div>
            
            <!-- Footer -->
            <div class="auth-footer">
                <p class="security-notice">
                    <span class="security-icon" aria-hidden="true">üîí</span>
                    Your data is protected with enterprise-grade security
                </p>
            </div>
        </div>
    </main>
    
    <!-- Scripts - Load in correct dependency order -->
    <script src="js/error-handler.js"></script>
    <script src="js/security.js"></script>
    <script src="js/keyboard-navigation.js"></script>
    <script src="js/auth.js"></script>
    
    <!-- Initialize application -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize authentication system
            const authManager = new AuthenticationManager();
            const keyboardNav = new KeyboardNavigationManager();
            
            // Check if user is already logged in
            if (SessionManager.isValidSession()) {
                window.location.href = '/main.html';
            }
        });
    </script>
</body>
</html>